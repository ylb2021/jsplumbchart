(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ec665aa"],{"37d3":function(t,e,n){"use strict";var s=n("cd39"),a=n.n(s);a.a},"3c34":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container documentation-container"},[n("div",{staticClass:"jspluimbchart"},[n("el-container",[n("el-header",[n("el-row",[t._v("备注:按下鼠标可以拖动平移(pan)设计器,滚动鼠标可进行缩放(zoom)操作,也可从右边菜单栏拖动step到设计器，进行连线操作")])],1),t._v(" "),n("el-container",[n("el-main",{staticClass:"jsplumbchart-main"},[n("drop",{staticClass:"drop-workplace",attrs:{id:"workplace"},on:{drop:t.handleDrop}},[n("jsplumbchart",{ref:"jsplumbchart",attrs:{data:t.jsplumbchartOption},on:{modifyJsplumbchartOption:t.modifyJsplumbchartOption,modifyChart:t.modifyChart,nodedblClick:t.nodedblClick,handleDrop:t.handleDrop}})],1)],1),t._v(" "),n("el-aside",{attrs:{width:"250px"}},[n("vaside")],1)],1)],1)],1)])},a=[],i=(n("7514"),n("7f7f"),n("28a5"),n("ac6a"),n("5530")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"right-aside"},[n("el-collapse",{attrs:{accordion:""}},t._l(t.stepList,(function(e,s){return n("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.thisIcon.length,expression:"drawNav.thisIcon.length != '0'"}],key:s+"-gQuery",attrs:{"track-by":"$index",name:s}},[n("template",{slot:"title"},[n("i",{staticClass:"icon iconfont icon-ir-supply-chain"}),t._v("\n         "+t._s(e.group)+"\n        "),n("span",{staticClass:"iconNavNub"},[t._v("("+t._s(e.thisIcon.length)+")")])]),t._v(" "),t._l(e.thisIcon,(function(e,s){return n("drag",{key:s+"-drawNav",staticClass:"designIcon",attrs:{"data-index":s,"data-type":e.type,"transfer-data":{drawIcon:e}},on:{dragstart:t.handleDragstart}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.name,placement:"top"}},[n("div",{staticClass:"item-step-icon"},[n("i",{class:t._f("iconFilter")(e.name)}),t._v(" "),n("h4",[t._v(t._s(e.name))])])])],1)}))],2)})),1)],1)},r=[],c=n("ed08"),u={filters:{iconFilter:function(t){return"iconTrue"==Object(c["e"])(t)?"icon iconfont icon-ir-d-"+t:"icon iconfont icon-ir-d-default"},updateTimeFilter:function(t){return moment(t).format("YYYY-MM-DD HH:mm:ss")}},data:function(){return{gqueryTree:[],stepList:[],cnObj:{}}},mounted:function(){this.stepList=[{group:"IO",thisIcon:[{id:"source",name:"source",type:"source",tags:["IO","rtcflow"],stepSettings:{},outputConfigurations:{output:[{column:"",type:"",alias:"",description:""}]}},{id:"dummy_source",name:"dummy_source",type:"source_dummy",tags:["IO","rtcflow"],stepSettings:{dataType:"userClick",storage:"DUMMY"},outputConfigurations:{output:[{column:"",type:"",alias:"",description:""}]}},{id:"sink",name:"sink",type:"sink",tags:["IO","rtcflow"],stepSettings:{},inputConfigurations:{input:[{column:"",type:"",alias:"",description:""}]}}]},{group:"Transform",thisIcon:[{id:"filter",name:"filter",type:"filter",tags:["Transform","rtcflow"],stepSettings:{},inputConfigurations:{input:[{column:"",type:"",alias:"",description:""}]},outputConfigurations:{output:[{column:"",type:"",alias:"",description:""}]}},{id:"transform",name:"transform",type:"transform",tags:["Transform","rtcflow"],stepSettings:{},inputConfigurations:{input:[{column:"",type:"",alias:"",description:""}]},outputConfigurations:{output:[{column:"",type:"",alias:"",description:""}]}},{id:"sql",name:"sql",type:"sql",tags:["Transform","rtcflow"],stepSettings:{},inputConfigurations:{input:[{column:"",type:"",alias:"",description:""}]},outputConfigurations:{output:[{column:"",type:"",alias:"",description:""}]}}]},{group:"Join",thisIcon:[{id:"join",name:"join",type:"join",tags:["Join","rtcflow"],stepSettings:{},inputConfigurations:{left:[{column:"",type:"",alias:"",description:""}],right:[{column:"",type:"",alias:"",description:""}]},outputConfigurations:{output:[{column:"",type:"",alias:"",description:""}]}},{id:"lookup",name:"lookup",type:"lookup",tags:["Join","rtcflow"],stepSettings:{},inputConfigurations:{input:[{column:"",type:"",alias:"",description:""}]},outputConfigurations:{output:[{column:"",type:"",alias:"",description:""}]}}]},{group:"Group",thisIcon:[{id:"aggregate",name:"aggregate",type:"aggregate",tags:["Group","rtcflow"],stepSettings:{},inputConfigurations:{input:[{column:"",type:"",alias:"",description:""}]},outputConfigurations:{output:[{column:"",type:"",alias:"",description:""}]}}]},{group:"Set",thisIcon:[{id:"split",name:"split",type:"split",tags:["Set","rtcflow"],stepSettings:{},inputConfigurations:{input:[{column:"",type:"",alias:"",description:""}]},outputConfigurations:{output:[{column:"",type:"",alias:"",description:""}]}}]}]},methods:{nodeIcon:function(){return type in nodeIconFont&&"iconTrue"},handleDragstart:function(){},start:function(){console.log("拖动开始")},drag:function(t,e){console.log("元素正在拖动")},getLeftAsideData:function(t,e){var n=this;return _.map(e,(function(e){return{group:e,thisIcon:_.compact(n.getIconData(t,e))}}))},getGroupData:function(t){return _.map(t,(function(t){return t.tags[0]}))},getIconData:function(t,e){return _.map(t,(function(t){if(t.tags[0]==e)return t}))}}},p=u,l=(n("6622"),n("2877")),d=Object(l["a"])(p,o,r,!1,null,"dd0dea4a",null),f=d.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"jsplumb-chart"},[n("div",{staticClass:"cavansClass",attrs:{id:"cavans"}},[n("flowchartNode",{directives:[{name:"show",rawName:"v-show",value:"flowchartnode"==t.nodeType,expression:"nodeType=='flowchartnode'"}],attrs:{data:{stepData:t.stepData}},on:{dblClick:t.dblClick,copyNode:t.copyNode,delNode:t.delNode}})],1)])},h=[],g=function(t){var e=t.jsPlumb.getInstance({Container:t.container});return e.bind("click",(function(t){e.deleteConnection(t)})),e.bind("connection",(function(e){return t.completedConnect(),e})),e.bind("connectionDetached",(function(e){t.delConnections(e,(function(){}))})),e},b=n("2ef0"),j=n.n(b),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flowchart-node",attrs:{id:"flowchartnode"}},t._l(t.stepData,(function(e,s){return n("div",{key:s,class:"designIconBig "+t.setClass(t.nodeClass(e.type)),style:"left:"+e.x+"px;top:"+e.y+"px;position:absolute;margin:0",attrs:{id:e.id,"data-sign":e.name,"data-type":e.type},on:{dblclick:function(n){return t.dblClick(e)}}},[n("i",{staticClass:"icon iconfont icon-ir-designIconBg designIconBg"}),t._v(" "),n("i",{class:"iconTrue"==t.nodeIcon(e.type)?"icon iconfont icon-ir-d-"+e.type:"icon iconfont icon-ir-d-default",attrs:{id:"changeSte"}}),t._v(" "),n("h4",{attrs:{title:e.name}},[t._v(t._s(e.name))]),t._v(" "),n("h5",[t._v("ID:"+t._s(e.id))]),t._v(" "),n("em",{staticClass:"icon iconfont icon-ir-copy",attrs:{id:"copeDes",title:"复制"},on:{click:function(n){return n.preventDefault(),t.copyNode(e)}}}),t._v(" "),n("em",{staticClass:"fa fa-trash-o",attrs:{id:"removeDes",title:"删除"},on:{click:function(n){return t.delNode(e.id)}}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"split"==e.type,expression:"data.type=='split'"}],staticClass:"line-split",style:t.setLineSplit(e)})])})),0)},k=[];n("a481");function v(t){switch(t){case"source":case"sqlsource":case"streaming_source":case"source_dummy":case"StartEvent":return"classD_A";case"sink":case"show":return"classD_B";case"union":case"intersect":case"starjoin":return"classD_C";case"decision":case"split":case"validate":return"classD_D";case"join":case"productjoin":case"minus":return"classD_E";case"dataflow":case"hawq":case"hive":case"mapreduce":case"shell":case"spark":case"event":case"exclusive":case"parallel":return"classW_C";default:return"classO"}}var C={source:"source",sqlsource:"sqlsource",sink:"sink",decision:"decision",validate:"validate",supplement:"supplement",sql:"sql",transform:"transform",filter:"filter",sample:"sample",lookup:"lookup",join:"join",starjoin:"starjoin",productjoin:"productjoin",aggregate:"aggregate",top:"top",union:"union",intersect:"intersect",minus:"minus",split:"split",Correlation:"Correlation",Summary:"Summary",gradientboogradientbostedtrees_predict:"gradientboogradientbostedtrees_predict",MultilayerPerceptronPredict:"MultilayerPerceptronPredict",MultilayerPerceptronTrain:"MultilayerPerceptronTrain",kmeans_predict:"kmeans_predict",kmeans_train:"kmeans_train"};function x(t){return t in C&&"iconTrue"}function D(t){switch(t){case"decision":case"split":return"classD_D1";case"validate":return"classD_D2";case"join":case"productjoin":return"classD_E1";case"minus":return"classD_E2";case"dataflow":return"classW_A"}}var w={strokeWidth:2,stroke:"#4e5568",joinstyle:"round",outlineColor:"white",outlineWidth:0},O={strokeWidth:3,stroke:"#ff4e4e",outlineColor:"white",outlineWidth:0},S={endpoint:["Dot",{radius:8}],connectorStyle:w,connectorHoverStyle:O,paintStyle:{stroke:"#4e5568",fill:"transparent",radius:6,lineWidth:6},isSource:!0,connector:["Flowchart",{stub:[5,5],gap:10,cornerRadius:5,alwaysRespectStubs:!0}],isTarget:!1,maxConnections:1,connectorOverlays:[["Arrow",{width:10,length:10,location:1}]]},I={endpoint:["Dot",{radius:6}],connectorStyle:w,connectorHoverStyle:O,paintStyle:{fill:"#4e5568"},isSource:!1,connector:["Straight",{stub:[5,5],gap:10,cornerRadius:5,alwaysRespectStubs:!0}],isTarget:!0,maxConnections:1,connectorOverlays:[["Arrow",{width:10,length:10,location:1}]]},T=function(t,e,n,s,a){t.deleteEveryEndpoint(),e.$nextTick((function(){n.forEach((function(e,n){var o=e.type,r=e.id;if("classD_A"==v(o))t.addEndpoint(r,{anchors:"RightMiddle",maxConnections:100},Object(i["a"])({uuid:r+"outputorigin"},S));else if("classD_B"==v(o))t.addEndpoint(r,{anchors:"LeftMiddle"},Object(i["a"])({uuid:r+"inputdestination"},I));else if("classD_C"==v(o)||"classW_C"==v(o))t.addEndpoint(r,{anchors:"LeftMiddle",maxConnections:-1},Object(i["a"])({uuid:r+"inputdestination"},I)),t.addEndpoint(r,{anchors:"RightMiddle",maxConnections:-1},Object(i["a"])({uuid:r+"outputorigin"},S));else if("classD_D1"==D(o)){var c=N(E(e.outputConfigurations,a));a.forEach(c,(function(e,n){t.addEndpoint(r,{anchors:e.value,maxConnections:-1,overlays:[["Label",{location:[3.5,0],label:e.key,cssClass:"endpointSourceLabelMult"}]]},Object(i["a"])({uuid:r+e.key+"origin"},S))})),t.addEndpoint(r,{anchors:"LeftMiddle"},Object(i["a"])({uuid:r+"inputdestination"},I))}else"classD_D2"==D(o)?(t.addEndpoint(r,{anchors:[1,.3,0,0],maxConnections:-1,overlays:[["Label",{location:[1.5,-.5],label:"ok",cssClass:"endpointSourceLabel"}]]},Object(i["a"])({uuid:r+"okorigin"},S)),t.addEndpoint(r,{anchors:[1,.7,0,0],maxConnections:-1,overlays:[["Label",{location:[1.5,1.3],label:"error",cssClass:"endpointSourceLabel"}]]},Object(i["a"])({uuid:r+"errororigin"},S)),t.addEndpoint(r,{anchors:"LeftMiddle"},Object(i["a"])({uuid:r+"inputdestination"},I))):"classD_E1"==D(o)?(t.addEndpoint(r,{anchors:"RightMiddle",maxConnections:-1},Object(i["a"])({uuid:r+"outputorigin"},S)),t.addEndpoint(r,{anchors:[0,.3,0,0],overlays:[["Label",{location:[-1,-.5],label:"left",cssClass:"endpointSourceLabel"}]]},Object(i["a"])({uuid:r+"leftdestination"},I)),t.addEndpoint(r,{anchors:[0,.7,0,0],overlays:[["Label",{location:[-1,1.5],label:"right",cssClass:"endpointSourceLabel"}]]},Object(i["a"])({uuid:r+"rightdestination"},I))):"classD_E2"==D(o)?(t.addEndpoint(r,{anchors:"RightMiddle",maxConnections:-1},Object(i["a"])({uuid:r+"outputorigin"},S)),t.addEndpoint(r,{anchors:[0,.3,0,0],overlays:[["Label",{location:[-1,-.5],label:"input1",cssClass:"endpointSourceLabel"}]]},Object(i["a"])({uuid:r+"input1destination"},I)),t.addEndpoint(r,{anchors:[0,.7,0,0],overlays:[["Label",{location:[-1,1.5],label:"input2",cssClass:"endpointSourceLabel"}]]},Object(i["a"])({uuid:r+"input2destination"},I))):(t.addEndpoint(r,{anchors:"RightMiddle",maxConnections:-1},Object(i["a"])({uuid:r+"outputorigin"},S)),t.addEndpoint(r,{anchors:"LeftMiddle",maxConnections:"sql"==o?-1:1},Object(i["a"])({uuid:r+"inputdestination"},I)));t.draggable(r,{start:function(t){},drag:function(t){},stop:function(t){var e=t.el.style.top,n=t.el.style.left;s({x:parseInt(n.replace("px","")),y:parseInt(e.replace("px","")),id:t.el.attributes.id.nodeValue})}})}))}))},E=function(t,e){var n=[];return e.forEach(t,(function(t,e){n.push({key:e,value:t})})),n},N=function(t){var e=t.length,n=1,s=0;switch(e){case 21:case 20:case 19:case 18:case 17:n=4,s=-1.33;break;case 16:case 15:n=4,s=-1.25;break;case 14:case 13:case 12:n=3,s=-.73;break;case 11:n=2.5,s=-.65;break;case 10:n=2.5,s=-.6;break;case 9:case 8:n=2,s=-.45;break;case 7:n=1.8,s=-.2;break;case 5:n=2,s=-.33;break;case 6:n=2,s=-.35;break;case 4:case 3:n=1,s=.15;break;case 2:n=1,s=.25;break;case 1:n=1,s=.5;break;default:}for(var a=n/e,i=[],o=0;o<t.length;o++)i.push({key:t[o].key,value:[1,s,0,0]}),s+=a;return i},L=function(t,e,n,s){e.$nextTick((function(){n.forEach((function(e){t.connect({uuids:[e.source+e.sourceOutput+"origin",e.target+e.input+"destination"]})})),s()}))},P=function(t){var e="";return e="classD_A"==t?"t1Style":"classD_B"==t?"t3Style":"t2Style",e},M=function(t,e){return e.map(t,(function(t){return t.sourceOutput?t.sourceOutput=t.sourceOutput:t.sourceOutput="output","classD_C"==v(t.targetInput)&&(t.targetInput=t.source),t.input?t.targetInput=t.input:t.targetInput="input",t.input?t.input=t.input:t.input="input",t}))},z={components:{},props:{data:{type:Object,default:{}}},data:function(){return{stepData:[],nodeClass:v,nodeIcon:x,setClass:P}},computed:{},watch:{data:function(t){this.stepData=t.stepData}},mounted:function(){},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{delNode:function(t){this.$emit("delNode",t)},dblClick:function(t){this.$emit("dblClick",t)},copyNode:function(t){this.$emit("copyNode",t)},setLineSplit:function(t){if("split"==t.type){var e=j.a.toArray(t.outputConfigurations);switch(e.length){case 21:case 20:return"height: 280px; top: -100px;";case 19:case 18:case 17:return"height: 270px; top: -95px;";case 16:case 15:return"height: 270px; top: -90px;";case 14:case 13:case 12:return"height: 190px; top: -50px;";case 11:case 10:return"height: 155px; top: -43px;";case 9:case 8:return"height: 120px; top: -35px;";case 7:case 6:case 5:return"height: 120px; top: -25px;";default:return"height: 70px; top: 0px;"}}}}},q=z,$=(n("fa36"),Object(l["a"])(q,y,k,!1,null,null,null)),Z=$.exports,R=n("7d05");function Y(t,e){var n=t.getContainer(),s=n.parentNode,a=R(n,{smoothScroll:!1,bounds:!1,autocenter:!0,zoomDoubleClickSpeed:1,minZoom:.5,maxZoom:2,beforeWheel:function(t){return e}});return t.mainContainerWrap=s,t.pan=a,a.on("zoom",(function(e){var n=e.getTransform(),s=n.scale;t.setZoom(s)})),s.style.cursor="grab",s.addEventListener("mousedown",(function(){this.style.cursor="grabbing",s.addEventListener("mouseout",(function(){this.style.cursor="grab"}))})),s.addEventListener("mouseup",(function(){this.style.cursor="grab"})),a}var J={init:Y},A=J,F={watch:{data:function(t){this.stepData=this.data.steps,this.links=this.data.links,this.nodeType=this.data.nodeType,this.operationType=t.operationType,this.containerRect=t.containerRect,this.isPanZoom=t.isPanZoom},stepData:function(t){this.$emit("modifyChart",{stepData:t,links:this.links})},links:function(t){this.$emit("modifyChart",{stepData:this.stepData,links:t})}},props:{data:{type:Object,default:{}}},components:{flowchartNode:Z},data:function(){return{jsplumbInstance:g({container:this.data.container,delConnections:this.delConnections,completedConnect:this.completedConnect,jsPlumb:this.data.jsPlumb}),stepData:[],links:[],nodeClass:v,nodeIcon:x,setClass:P,instanceZoom:"",nodeType:"",isPanZoomInit:!0,cssText:"",containerRect:"",isPanZoom:""}},computed:{},mounted:function(){},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){var t=this;this.$nextTick((function(){if(t.containerRect&&t.isPanZoom){var e=j.a.last(t.stepData),n=t.modifyNodePositon({x:e.x,y:e.y});t.stepData=j.a.map(j.a.cloneDeep(t.stepData),(function(t){return e.id==t.id?Object(i["a"])(Object(i["a"])({},t),{},{x:n.x,y:n.y}):t})),t.$emit("modifyJsplumbchartOption",Object(i["a"])(Object(i["a"])({},t.data),{},{steps:t.stepData,links:t.links,containerRect:""}))}t.drawJsplumbChart({jsplumbInstance:t.jsplumbInstance,self:t,flowData:t.stepData,links:t.links},(function(){if(t.getLinksData(),t.isPanZoomInit&&t.isPanZoom){if(A.init(t.jsplumbInstance,!t.isPanZoom),t.isPanZoomInit=!1,!t.data.matrix)return;t.canvasMoveTo(t.data.matrix,(function(e){t.jsplumbInstance.pan.moveTo(e.x,e.y),t.jsplumbInstance.pan.zoomAbs(e.x,e.y,e.scale)}))}}))}))},beforeDestroy:function(){},destroyed:function(){},methods:{getScale:function(t){var e,n=t.getContainer();if(t.pan){var s=t.pan.getTransform(),a=s.scale;e=a}else{var i=window.getComputedStyle(n).transform;e=i&&1*i.split(", ")[3]}return t.setZoom(e),e},modifyNodePositon:function(t){this.jsplumbInstance;var e=this.containerRect,n=this.getScale(this.jsplumbInstance),s=(t.x-e.left)/n,a=(t.y-e.top)/n;return s-=20,a-=25,{x:s,y:a}},canvasMoveTo:function(t,e){e(t)},setCavansMatrix:function(t){var e=j.a.filter(t,(function(t){return"source"==t.type}));return e[0].stepSettings&&e[0].stepSettings.matrix},setNodeTemplate:function(t){switch(t){case"flowchartnode":return Z;case"cepNode":return cepNode;default:}},drawJsplumbChart:function(t,e){var n=this;T(t.jsplumbInstance,t.self,t.flowData,(function(t){n.stepData=j.a.map(n.stepData,(function(e){return e.id==t.id?Object(i["a"])(Object(i["a"])({},e),{},{x:t.x,y:t.y}):e}))}),j.a),L(t.jsplumbInstance,t.self,t.links,e)},completedConnect:function(){this.getLinksData()},delConnections:function(t,e){e(),this.getLinksData()},delNode:function(t){this.stepData=j.a.filter(j.a.cloneDeep(this.stepData),(function(e){return e.id!=t}))},dblClick:function(t){this.$emit("nodedblClick",t)},getLinksData:function(){this.links=M(j.a.map(this.jsplumbInstance.getAllConnections(),(function(t){return{name:t.id,source:t.sourceId,sourceOutput:t.endpoints[0].canvas.nextSibling.textContent,target:t.targetId,targetInput:t.target.dataset.type,input:t.endpoints[1].canvas.nextSibling.textContent}})),j.a)},reset:function(){this.stepData=[],this.links=[],this.jsplumbInstance.deleteEveryEndpoint("workplace")},copyNode:function(t){var e=Object(i["a"])(Object(i["a"])({},t),{},{x:t.x+50,y:t.y+50,id:t.type+"_"+(this.stepData.length+1)+"_copy"});this.$emit("handleDrop",e)},setLineSplit:function(t){if("split"==t.type){var e=j.a.toArray(t.outputConfigurations);switch(e.length){case 21:case 20:return"height: 280px; top: -100px;";case 19:case 18:case 17:return"height: 270px; top: -95px;";case 16:case 15:return"height: 270px; top: -90px;";case 14:case 13:case 12:return"height: 190px; top: -50px;";case 11:case 10:return"height: 155px; top: -43px;";case 9:case 8:return"height: 120px; top: -35px;";case 7:case 6:case 5:return"height: 120px; top: -25px;";default:return"height: 70px; top: 0px;"}}}}},W=F,U=(n("37d3"),Object(l["a"])(W,m,h,!1,null,null,null)),H=U.exports,B=n("c1df"),G=n.n(B),V=(n("27ae"),n("e193")),X=n.n(V),Q=n("81b0"),K=n.n(Q),tt={name:"JsplumbChart",components:{vaside:f,jsplumbchart:H},props:{},data:function(){return{jsplumbchartOption:{isPanZoom:!0,steps:this.steps,links:this.links,container:"workplace",nodeType:"flowchartnode",jsPlumb:X.a.jsPlumb},nodeTab:[{title:"输入",name:"input",icon:"fa fa-sign-in",lable:"input"},{title:"参数",name:"parameter",icon:"fa fa-gear",lable:"parameter"},{title:"输出",name:"output",icon:"fa fa-sign-out",lable:"output"}],dialogOption:{},input1:"",links:[],steps:[],matrix:"",operationType:"copy",input1Test:"",flowData:{flowName:"aggregate_flow",links:[{name:"con_43",source:"dummy_source_7",sourceOutput:"output",target:"sql_6",targetInput:"input",input:"input"},{name:"con_44",source:"sql_6",sourceOutput:"output",target:"lookup_3",targetInput:"input",input:"input"},{name:"con_45",source:"lookup_3",sourceOutput:"output",target:"transform_8",targetInput:"input",input:"input"},{name:"con_46",source:"transform_8",sourceOutput:"output",target:"join_2",targetInput:"left",input:"left"},{name:"con_47",source:"source_10",sourceOutput:"output",target:"join_2",targetInput:"right",input:"right"},{name:"con_48",source:"join_2",sourceOutput:"output",target:"filter_5",targetInput:"input",input:"input"},{name:"con_49",source:"filter_5",sourceOutput:"output",target:"aggregate_1",targetInput:"input",input:"input"},{name:"con_50",source:"aggregate_1",sourceOutput:"output",target:"sql_9",targetInput:"input",input:"input"},{name:"con_51",source:"sql_9",sourceOutput:"output",target:"transform_4",targetInput:"input",input:"input"},{name:"con_52",source:"transform_4",sourceOutput:"output",target:"sink_11",targetInput:"input",input:"input"}],steps:[{id:"aggregate_1",name:"aggregate",type:"aggregate",x:544,y:269,stepSettings:{},inputConfigurations:{input:[]},outputConfigurations:{output:[]}},{id:"join_2",name:"join",type:"join",x:656,y:60,stepSettings:{},inputConfigurations:{input:[]},outputConfigurations:{output:[]}},{id:"lookup_3",name:"lookup",type:"lookup",x:311,y:164,stepSettings:{},inputConfigurations:{input:[]},outputConfigurations:{output:[]}},{id:"transform_4",name:"transform",type:"transform",x:928,y:242,stepSettings:{},inputConfigurations:{input:[]},outputConfigurations:{output:[]}},{id:"filter_5",name:"filter",type:"filter",x:980,y:59,stepSettings:{},inputConfigurations:{input:[]},outputConfigurations:{output:[]}},{id:"sql_6",name:"sql",type:"sql",x:88,y:311,stepSettings:{},inputConfigurations:{input:[]},outputConfigurations:{output:[]}},{id:"dummy_source_7",name:"dummy_source",type:"source_dummy",x:63,y:108,stepSettings:{dataType:"userClick",storage:"DUMMY"},outputConfigurations:{output:[]}},{id:"transform_8",name:"transform",type:"transform",x:347,y:303,stepSettings:{},inputConfigurations:{input:[]},outputConfigurations:{output:[]}},{id:"sql_9",name:"sql",type:"sql",x:811,y:398,stepSettings:{},inputConfigurations:{input:[]},outputConfigurations:{output:[]}},{id:"source_10",name:"source",type:"source",x:22,y:460,stepSettings:{},outputConfigurations:{output:[]}},{id:"sink_11",name:"sink",type:"sink",x:1208,y:334,stepSettings:{},inputConfigurations:{input:[]}}],date:"2020-03-29 18:27:17",matrix:'{"x":-7,"y":40,"scale":1}',id:6}}},watch:{},mounted:function(){this.steps=this.flowData.steps,this.links=this.flowData.links,this.input1=this.flowData.flowName,this.matrix=this.flowData.matrix,this.jsplumbchartOption={isPanZoom:!0,steps:this.steps,links:this.links,container:"workplace",nodeType:"flowchartnode",jsPlumb:this.jsPlumb,matrix:this.flowData.matrix&&JSON.parse(this.flowData.matrix)}},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{modifyJsplumbchartOption:function(t){this.jsplumbchartOption=t},handleDragover:function(){},copyNode:function(t){var e="";return Object(i["a"])(Object(i["a"])({},t),{},{id:this.isExitStepID(t.id)?t.id+"_new"+e:t.id})},handleDrop:function(t){console.log("handleDrop(val) {",t);var e="",n="",s=this.$refs.jsplumbchart.jsplumbInstance.getContainer();t.drawIcon?(e=this.getCurrentNode(t,this.jsplumbchartOption.isPanZoom?s:""),n=s&&s.getBoundingClientRect(),this.operationType="add"):e=this.copyNode(t),this.steps.push(e),this.jsplumbchartOption=Object(i["a"])(Object(i["a"])({},this.jsplumbchartOption),{},{steps:this.steps,links:this.links,operationType:this.operationType,containerRect:n})},isExitStepID:function(t){var e=!1;return K.a.forEach(this.steps,(function(n){n.id==t&&(e=!0)})),e},getScale:function(t){var e,n=t.getContainer();if(t.pan){var s=t.pan.getTransform(),a=s.scale;e=a}else{var i=window.getComputedStyle(n).transform;e=1*i.split(", ")[3]}return t.setZoom(e),e},getCurrentNode:function(t,e){var n="",s=t.drawIcon.id+"_"+(this.steps.length+1),a=this.isExitStepID(s)?s+"_new"+n:s,o={id:this.isExitStepID(a)?a+"_new":a,name:t.drawIcon.name,type:t.drawIcon.type,x:K.a.isElement(e)?event.pageX:event.offsetX,y:K.a.isElement(e)?event.pageY:event.offsetY,stepSettings:t.drawIcon.stepSettings},r={outputConfigurations:{output:[]}},c={inputConfigurations:{input:[]}};switch(t.drawIcon.type){case"source":case"source_dummy":return Object(i["a"])(Object(i["a"])({},o),r);case"sink":return Object(i["a"])(Object(i["a"])({},o),c);default:return Object(i["a"])(Object(i["a"])(Object(i["a"])({},o),c),r)}},saveFlow:function(){var t=this;if(this.input1){var e={};e=this.jsplumbchartOption.isPanZoom?{flowName:this.input1,links:this.links,steps:this.steps,date:G()().format("YYYY-MM-DD HH:mm:ss"),matrix:JSON.stringify(this.$refs.jsplumbchart.jsplumbInstance.pan.getTransform())}:{flowName:this.input1,links:this.links,steps:this.steps,date:G()().format("YYYY-MM-DD HH:mm:ss")},this.$route.query.row?modifyFlow(Object(i["a"])(Object(i["a"])({},e),{},{id:this.flowData.id})).then((function(){t.$router.go(-1)})):addFlow(e).then((function(){t.$router.go(-1)}))}else this.$message({showClose:!0,message:"流程名称不可以为空",type:"error"})},modifyChart:function(t){this.steps=t.stepData,this.links=t.links,this.jsplumbchartOption=Object(i["a"])(Object(i["a"])({},this.jsplumbchartOption),{},{steps:t.stepData,links:t.links})},clearall:function(){this.steps=[],this.links=[],this.$refs.jsplumbchart.reset()},reset:function(){this.$refs.jsplumbchart.resume()},nodedblClick:function(t){this.isOpenStepDialog(t)?this.$message({message:"请建立正确的连接！",type:"error"}):this.dialogOption={dialogVisible:!0,step:t,filterLinks:this.filterLinks(t),preSteps:this.getPreNodes(this.filterLinks(t)),pre:this.getPreNode(this.findLinks(t)),nodeSetTab:this.setNodeSetTab(t,this.getPreNode(this.findLinks(t))),steps:this.steps,links:this.links}},isOpenStepDialog:function(t){return"source"!=t.type&&"source_dummy"!=t.type&&("join"==t.type&&(0==this.filterLinks(t).length||1==this.filterLinks(t).length)||(!("filter"!=t.type&&"sink"!=t.type&&"aggregate"!=t.type&&"transform"!=t.type&&"lookup"!=t.type&&"split"!=t.type&&"sql"!=t.type||this.filterLinks(t)[0])||void 0))},filterLinks:function(t){return K.a.filter(this.links,(function(e){return e.target==t.id}))},setNodeSetTab:function(t,e){var n=this;if("sink"==t.type)return[Object(i["a"])(Object(i["a"])({},this.nodeTab[0]),{},{title:"输入 ("+e.name+")"}),this.nodeTab[1]];if("source"==t.type||"source_dummy"==t.type)return[this.nodeTab[1],this.nodeTab[2]];if("filter"==t.type||"aggregate"==t.type||"sql"==t.type||"transform"==t.type||"lookup"==t.type||"split"==t.type)return[Object(i["a"])(Object(i["a"])({},this.nodeTab[0]),{},{title:"输入 ("+e.name+")"}),this.nodeTab[1],this.nodeTab[2]];if("join"==t.type){var s=[];return K.a.forEach(this.getLinks(t),(function(t){s.push(Object(i["a"])(Object(i["a"])({},n.nodeTab[0]),{},{title:t.targetInput+" ("+n.getPreNode(t).name+")",targetInput:t.targetInput}))})),[].concat(s,[this.nodeTab[1],this.nodeTab[2]])}},getPreNodes:function(t){var e=this,n=[];return K.a.forEach(t,(function(t){K.a.forEach(e.steps,(function(e){t.source==e.id&&n.push(e)}))})),n},getPreNode:function(t){return K.a.find(this.steps,(function(e){return t?e.id==t.source:""}))},findLinks:function(t){return K.a.find(this.links,(function(e){return e.target==t.id}))},modifyFlowData:function(t){this.steps=K.a.map(this.steps,(function(e){return e.type==t.step.type&&"source"==t.step.type&&e.id==t.step.id?Object(i["a"])(Object(i["a"])({},e),{},{stepSettings:t.data.parametData,outputConfigurations:t.data.checkedOutData}):e.type!=t.step.type||"source"==t.step.type&&"sink"==t.step.type||e.id!=t.step.id?e.type==t.step.type&&"sink"==t.step.type&&e.id==t.step.id?Object(i["a"])(Object(i["a"])({},e),{},{stepSettings:t.data.parametData,inputConfigurations:t.data.checkedinPUTData}):e:Object(i["a"])(Object(i["a"])({},e),{},{stepSettings:t.data.parametData,outputConfigurations:t.data.checkedOutData,inputConfigurations:t.data.checkedinPUTData})}))}}},et=tt,nt=(n("e066"),Object(l["a"])(et,s,a,!1,null,"49f151bc",null));e["default"]=nt.exports},4678:function(t,e,n){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"73332","./en-il.js":"73332","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"50385","./id.js":"50385","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e9","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e9","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=i(t);return n(e)}function i(t){var e=s[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}a.keys=function(){return Object.keys(s)},a.resolve=i,t.exports=a,a.id="4678"},6622:function(t,e,n){"use strict";var s=n("c5f4"),a=n.n(s);a.a},"779a":function(t,e,n){},c5f4:function(t,e,n){},cd39:function(t,e,n){},e066:function(t,e,n){"use strict";var s=n("e9d5"),a=n.n(s);a.a},e9d5:function(t,e,n){},fa36:function(t,e,n){"use strict";var s=n("779a"),a=n.n(s);a.a}}]);